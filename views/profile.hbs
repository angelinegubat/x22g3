{{#section "head"}}
<!-- FONT AWESOME -->
<link href='https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.1/css/all.css' rel='stylesheet'>

<!-- FULL CALENDAR -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.5.1/main.min.css">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.5.1/main.min.js"></script>

<!-- TABULATOR -->
<link href="https://unpkg.com/tabulator-tables@4.9.3/dist/css/bootstrap/tabulator_bootstrap4.min.css" rel="stylesheet">
<script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.9.3/dist/js/tabulator.min.js"></script>
{{/section}}

<div class="container p-0">
  <div class="row">
    <div class="pb-4 col-12 col-md-3">
      {{#> list-group}}
      {{> list-group-item href="#personal-information" text="Personal Information"}}
      {{> list-group-item href="#classes" text="Classes"}}
      {{> list-group-item href="#finance" text="Finance"}}
      {{/ list-group}}
    </div>
    <div class="col-12 col-md-9">
      <!-- PERSONAL INFORMATION -->
      <div class="list-group-target" id="personal-information">
        <h1>Personal Information</h1>
        <hr>

        <div class="d-flex align-items-center">
          <img width="128" height="128" src="/assets/perm_identity-24px.svg" alt="Profile Picture">
          <div id="student-info">
            <h2>{{lname}}, {{fname}} {{mname}}</h2>
            <p class=''>{{idNum}}</p>
            <p id='description'></p>
          </div>
        </div>
      </div>


      <!-- CLASSES -->
      <div class="list-group-target" id="classes">
        <h1>Classes</h1>
        <hr>
        <h2>Weekly Schedule</h2>
        <br>

        <div id="weekly-schedule"></div>
        <br>

        <h2>Tabular Schedule</h2>
        <br>
        <div id="tabular-schedule"></div>
      </div>


      <!-- FINANCE -->
      <div class="list-group-target" id="finance">
        <h1>Finance</h1>
        <hr>
        <h2>Clearance</h2>
        <br>
        <div class="overflow-auto">
          <table class="table table-striped table-bordered" id="balance">
            <thead>
              <tr>
                <th>Issue Date</th>
                <th>Amount</th>
                <th>Enrollment Hold</th>
              </tr>
            </thead>
          </table>
        </div>
        <br>

        <h2>Scholarship</h2>
        <br>

        <h3 id='scholarship'>{{scholarshipName}}</h3>
        <br>
        <div id="details">{{scholarshipDesc}}</div>
      </div>

    </div>
  </div>
</div>

<!-- Logic for toggling tabs -->
<script>
  window.location.hash = '#personal-information';

  var listGroupItems = document.querySelector('.list-group').children;

  var containers = document.querySelectorAll('div.list-group-target')


  window.onhashchange = setActive;

  function setActive(e) {
    var hash = window.location.hash;
    for (let i = 0; i < listGroupItems.length; i++) {
      var item = listGroupItems.item(i);
      var container = containers.item(i);

      var force = hash === item.hash
      item.classList.toggle('active', force)
      container.classList.toggle('d-none', !force)
    }
  }


</script>

<!-- Full calendar and tabulator sample -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var calendarEl = document.getElementById('weekly-schedule');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'timeGridWeek',
      events: [
        { title: 'the title', start: '2021-09-01', end: '2021-09-01' }
      ],
      stickyHeaderDates: false,
      allDaySlot: false,
      height: 'auto',
      themeSystem: 'bootstrap'
    });
    calendar.render();
  });

  const sample = [
    { id: 1, name: "Billy Bob", age: "12", gender: "male", height: 1, col: "red", dob: "", cheese: 1 },
    { id: 2, name: "Mary May", age: "1", gender: "female", height: 2, col: "blue", dob: "14/05/1982", cheese: true },
    { id: 3, name: "Christine Lobowski", age: "42", height: 0, col: "green", dob: "22/05/1982", cheese: "true" },
    { id: 4, name: "Brendon Philips", age: "125", gender: "male", height: 1, col: "orange", dob: "01/08/1980" },
    { id: 5, name: "Margret Marmajuke", age: "16", gender: "female", height: 5, col: "yellow", dob: "31/01/1999" },
    { id: 6, name: "Billy Bob", age: "12", gender: "male", height: 1, col: "red", dob: "", cheese: 1 },
    { id: 7, name: "Mary May", age: "1", gender: "female", height: 2, col: "blue", dob: "14/05/1982", cheese: true },
    { id: 8, name: "Christine Lobowski", age: "42", height: 0, col: "green", dob: "22/05/1982", cheese: "true" },
    { id: 9, name: "Brendon Philips", age: "125", gender: "male", height: 1, col: "orange", dob: "01/08/1980" },
    { id: 10, name: "Margret Marmajuke", age: "16", gender: "female", height: 5, col: "yellow", dob: "31/01/1999" },
  ]

  var table = new Tabulator('#tabular-schedule', {
    data: sample,
    autoColumns: true,
    layout: 'fitColumns',
    pagination: 'local',
    paginationSize: 10
  })
</script>