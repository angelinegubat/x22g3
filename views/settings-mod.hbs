<h1>Settings</h1>
<br>
<h2>Moderator Details</h2>
<br>
<span id="ch-user-header" onclick='toggle(this)'>Change Username</span>
<br><br>
<div class="form-container">
    <form id='changeusername'>
        <label class='res-8' for="curusername">Current Username</label>
        <input class='res-12' type="text" name="curusername"><br>
        <label class='res-8' for="curpassword">Current Password</label>
        <input class='res-12' type="password" name="curpassword"><br>
        <label class='res-8' for="newusername">New Username</label>
        <input class='res-12' type="text" name="newusername"><br>
        <br>
        <div class="wrap-button"><input class='res-8 submit' type="button" value="Submit" onclick="validate(this)">
        </div>
    </form>
</div>
<br>
<span id="ch-pass-header" onclick='toggle(this)'>Change Password</span>
<br><br>
<div class="form-container">
    <form id='changepassword'>
        <label class='res-8' for="curusername">Current Username</label>
        <input class='res-12' type="text" name="curusername"><br>
        <label class='res-8' for="curpassword">Current Password</label>
        <input class='res-12' type="password" name="curpassword"><br>
        <label class='res-8' for="newpassword">New Password</label>
        <input class='res-12' type="password" name="newpassword"><br>
        <label for="connewpassword" class="res-8">Confirm New Password</label>
        <input type="password" class="res-12"><br>
        <br>
        <div class="wrap-button"><input class='res-8 submit' type="button" value="Submit" onclick="validate(this)">
        </div>
    </form>
</div>
<br>



<script>
    function toggle(span) {
        var show, hide;

        if (span.id == 'ch-user-header') {
            show = document.getElementsByClassName('form-container')[0];
            hide = document.getElementsByClassName('form-container')[1];
        } else {
            show = document.getElementsByClassName('form-container')[1];
            hide = document.getElementsByClassName('form-container')[0];
        }

        show.style.display = 'block';
        hide.style.display = 'none';
    }

    function validate(submitInputButton) {
        if (!areEmptyFields(submitInputButton)) {
            alert('Credentials Changed!');
            window.location.href = 'login.html';
        }
    }

    // Return true if there is at least one empty field
    function areEmptyFields(submitInputButton) {
        const parentForm = submitInputButton.closest('form');
        var inputs = Array.prototype.slice.call(parentForm.querySelectorAll('input')).slice(0, -1);
        var err = 0;

        inputs.forEach(input => {
            if (input.value === '') {
                input.style.borderColor = 'red';
                err++;
            } else {
                input.style.borderColor = '#373b4485';

            }
        });

        return (err > 0);
    }
</script>