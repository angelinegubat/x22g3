<h1>Settings</h1>
<br><br>
<div class="border bg-white rounded p-4">
  <h4 id="ch-user-header" onclick='toggle(this)'>Change Username</h4>
  <br>
  <form id='change-username-form'>
    <div class="form-row">
      <div class="form-group col-md-4">
        <label for="curusername">Current Username</label>
        <input class="form-control" type="text" name="curusername"><br>
      </div>
      <div class="form-group col-md-4">
        <label for="curpassword">Current Password</label>
        <input class="form-control" type="password" name="curpassword"><br>
      </div>
      <div class="form-group col-md-4">
        <label for="newusername">New Username</label>
        <input class="form-control" type="text" name="newusername"><br>
      </div>
    </div>
    <button class='btn btn-primary' type="submit" onclick="validate(this)">Save changes</button>
  </form>
</div>
<br>

<div class="border bg-white rounded p-4">
  <h4 onclick='toggle(this)'>Change Password</h4>
  <br>
  <form id='change-password-form'>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="curusername">Current Username</label>
        <input class='form-control' type="text" name="curusername"><br>
      </div>
      <div class="form-group col-md-6">
        <label for="curpassword">Current Password</label>
        <input class='form-control' type="password" name="curpassword"><br>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="newpassword">New Password</label>
        <input class="form-control" type="password" name="newpassword"><br>
      </div>
      <div class="form-group col-md-6">
        <label for="connewpassword">Confirm New Password</label>
        <input type="password" class="form-control"><br>
      </div>
    </div>
    <br>
    <button class='btn btn-primary' type="submit" onclick="validate(this)">Save changes</button>
  </form>
</div>

<br>



<script>
  function toggle(span) {
    var show, hide;

    if (span.id == 'ch-user-header') {
      show = document.getElementsByClassName('form-container')[0];
      hide = document.getElementsByClassName('form-container')[1];
    } else {
      show = document.getElementsByClassName('form-container')[1];
      hide = document.getElementsByClassName('form-container')[0];
    }

    show.style.display = 'block';
    hide.style.display = 'none';
  }

  function validate(submitInputButton) {
    if (!areEmptyFields(submitInputButton)) {
      alert('Credentials Changed!');
      window.location.href = 'login.html';
    }
  }

  // Return true if there is at least one empty field
  function areEmptyFields(submitInputButton) {
    const parentForm = submitInputButton.closest('form');
    var inputs = Array.prototype.slice.call(parentForm.querySelectorAll('input')).slice(0, -1);
    var err = 0;

    inputs.forEach(input => {
      if (input.value === '') {
        input.style.borderColor = 'red';
        err++;
      } else {
        input.style.borderColor = '#373b4485';

      }
    });

    return (err > 0);
  }
</script>